{% extends "base.html" %}

{% block title %}Calendario Consolidado{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">Calendario Consolidado</h1>
    <!-- Contenedor del calendario -->
    <div id="calendar"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        
        // Inicializa el calendario
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'es',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: [
                // Iteramos los eventos pasados desde el contexto
                {% for item in calendario %}
                {
                    title: "{{ item.title|escapejs }}",
                    start: "{{ item.start|date:'Y-m-d' }}",
                    {% if item.end %}
                    end: "{{ item.end|date:'Y-m-d' }}",
                    {% endif %}
                    {% if item.color %}
                    color: "{{ item.color }}"
                    {% endif %}
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ]
        });

        // Renderiza el calendario
        calendar.render();
    });
</script>
{% endblock %}
